# linux

## Usages

1. if a fine name exists space, you cna refer to it by `"sudo test tree"` or `sudo\ test\ tree`

2. |      | Usage                                                        | Example                                                      |
   | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
   | \|   | the out put of previous command is the parameter of next command | curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh |
   | \|\| | if first command fail, execute next command                  |                                                              |
   | &&   | Successfully execute previous command then execute next command | echo "Trus" & echo "True"                                    |

3. set proxy

   ```shell
   export all_proxy="socks5://127.0.0.1:7891"
   # 7891 is the socks5 port from ClashX
   ```

4. install oh-my-zsh and change theme

   ```shell
   curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh
   ```

   ```shell
    vim ~/.zshrc
    #ZSH_THEME="ys"
    #change ys to the theme you want, see https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
    source ~/.zshrc
   ```


5. `! export` : next time commands begin with export

6. `lsof -i:80`: to check what process occupies this port, use `kill PID` to stop this process

   ```shell
   COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
   nginx   1041 root   11u  IPv4  20043      0t0  TCP *:http (LISTEN)
   nginx   2299  www   11u  IPv4  20043      0t0  TCP *:http (LISTEN)
   ```

7. 

## Add environment path

for `zsh`:

1. `vim ~/.zshrc`

   ```shell
   # >>> conda initialize >>>
   # !! Contents within this block are managed by 'conda init' !!
   __conda_setup="$('/Users/huangqiming/opt/miniconda3/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
   if [ $? -eq 0 ]; then
       eval "$__conda_setup"
   else
       if [ -f "/Users/huangqiming/opt/miniconda3/etc/profile.d/conda.sh" ]; then
           . "/Users/huangqiming/opt/miniconda3/etc/profile.d/conda.sh"
       else
           export PATH="/Users/huangqiming/opt/miniconda3/bin:$PATH"
       fi
   fi
   unset __conda_setup
   # <<< conda initialize <<<
   
   
   # HomeBrew
   export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles
   export PATH="/usr/local/bin:$PATH"
   export PATH="/usr/local/sbin:$PATH"
   # HomeBrew END
   ```

2. in the end of the file add

   ```shell
   # Shell Script
   export MY_SCRIPTS=/Users/huangqiming/Desktop/Shell
   export PATH=$PATH:$MY_SCRIPTS
   # Shell Script END
   ```

## commands

### open

| Parameter | Usage                               | Example                                                      |
| --------- | ----------------------------------- | ------------------------------------------------------------ |
| -a        | open file with specific application | open -a /Applications/Typora.app/Contents/MacOS/Typora linux.md |

### . and source and .sh file

`.`:  execute the `.sh` file using current shell

`source`  is equal to `./`

### rm

| Parameter | Usage | Example |
| --------- | ----- | ------- |
|           |       |         |

### echo

`echo 'hello' >> 123.txt`: write 'hello' after the end of the file 123.txt

`echo 'hello' > 123.txt`: replaced the content of file 123.txt

# git

if you want to `pull` after big change

```shell
git reset --hard
git pull
```

# vim

1. if you force quit `q!` when you edit a readonly file, the original content will be empty but you can find on a file `UTF-8 Unicode text`  generated by vim like `text.txt~`
2. how to rename current file: ?
3. if a file `test` is created by `sudo vim test`,  next time if you use `vim test`, it will be `readonly`. To save, you can use `:w !sudo tee %` and press `L`
4. switch to the line you want: `:62` -> switch to line 62



## shortcut

| Short Cut | Usage                                                        |
| --------- | ------------------------------------------------------------ |
| e!        | reload current file and discard all changes                  |
| w         | save current change                                          |
| f         | rename current file but after save, it will creat a copy     |
| j         | down next line                                               |
| k         | up next line                                                 |
| h         | left one word                                                |
| l         | right one world                                              |
| -         | Moves the cursor to the first non white space character on the previous line |
| Enter     | Moves the cursor to the first non white space character on the later line |
| w         | move to next word head                                       |
| W         | move to next word head (ignore some punctuation)             |
| e         | move to next word end                                        |
| E         | move to next word end (ignore some punctuation)              |
| b         | move to before word head                                     |
| x         | delect the current cursor word                               |
| X         | delect the previous cursor word                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |
|           |                                                              |



# python

## File access model in python

```python
"""
Read Only (‘r’)
Read and Write (‘r+’)
	The data being written will be inserted at the end, after the existing data. It's equal to 'a'
Write Only (‘w’)
Write and Read (‘w+’)
	if file does not exist, create,
	once open a file witn 'w' or 'w+', all the contents will be erased
Append Only (‘a’)
	The data being written will be inserted at the end, after the existing data.
Append and Read (‘a+’)
"""
with open('123.txt') as fr:
    content = fr.readlines()
    fr.write('123')

```

## String

```python
# judge if a set of String is ended with some strings
img = 'hello.jpg'
img.endwith('.jpg')
# -> yes
```

## Basic

reverse traversal

```python
a = [1,2,3,4,5]
for i in range(len(a)-1, -1, -1):
  print(a[i])
"""
5
4
3
2
1
"""
```

Lanbdma: Anonymous function, directlt return result and callable

```python
loss = lambda : b - a

for i in range(4):
    print(loss())
    a += 1
#8
#7
#6
#5
```



## pip

Generate requirements.txt

```shell
pip freeze > requirements.txt
```

## numpy

np.delect(a, index)

```python
a = [1,2,3,4,5,6]
np.delect(a, 0) # [2,3,4,5,6]
np.delect(a, [2,3]) # [1,2,5,6]
```

np.where(condition, x, y)

```python
# if satisfy the condition, output x, otherwise output y
import numpy as np

a = 2
print(np.where(a>4, 'yes', 'no'))
# -> no
```

np.mean()

```python
# axis equals to 0, the 0-dim is added up
#a.shape() -> (10,784)
np.mean(a, axis=0) # shape -> (,784)
#b.shape() -> (600, 28, 28)
np.mean(b, axis=0) # shape -> (28, 28)
```

np.argmax()

```python
# compute the index of maxvale, axis=0 indicates the col, axis=1 indicates the row
# axis等于几，就盖住这个axis去找
# a -> array([[0., 0., 0., 0., 0.],
#       [0., 0., 0., 0., 0.],
#      [0., 0., 0., 1., 0.]])
np.argmax(a, axis=0) # -> array([0, 0, 0, 2, 0])
np.argmax(a, axis=1) # -> array([0, 0, 3])
```

np.random.choice()

```python
np.random.choice(100)
# 77
```



## flask

basic flask project

```python
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('test.html')

app.run()
```

variable

```python
from flask import Flask
app = Flask(__name__)

@app.route('/hello/<name>')
def hello_name(name):
   return 'Hello %s!' % name

if __name__ == '__main__':
   app.run(debug = True)
```

form

```html
<form action="/comment" method="post">
	<textarea name="comment" placeholder="输入妞妞小评论儿" style="width: 330px; height: 100px"></textarea<br>
	<input type="submit" value="提交">
</form>
```

```python
@app.route('/comment', methods=['POST'])
def comment():
    with open('/www/web_app/comment.txt', 'w') as fr:
        fr.write(request.form.get('comment'))
    return "提交成功咯"
```

get ip

```python
ip = request.remote_addr
```



## os

current work path: `os.getcwd()`

## matplot

subplot

```python
# method 1
for i in range(4):
  plt.subplot(2, 2, i+1) # pay attention to the i+1
  plt.imshow()
plt.show()

# method2
fig, axs = plt.subplots(2, 5)		# axs
fig.suptitle('This is a chart')
for row in axs:
  for col in row:
    col.imshow()
    col.set_title('This is subtitle')
plt.show()
```

`plt.savefig('123.jog')` : save the plot as `123.jpg`

`plt.save(img)` : save the array image

# Web

## html and css

checkbox: set `disable='true'` to stop click the check box

```html
<input type='checkbox' check disable='true'>
```

## javascripts

`onclick`, function and `prompt`

```html
<p onclick='check()'>
  click me!
</p>
<script>
  function check() {
    var access = prompt('please input access: ')
    if (access = 'woshiniuniu') {
      window.location.href="b.html";
    }
    else {
      alert('Wrong access, sorry!')
    }
  }
</script>
```

`document.getElementById()`： 返回一个对象，可以调用方法, there are other methods, `mainTwo` 是动态的集合（创建的时候没有，但是随着代码从上往下执行，碰到新的div会动态更新）

```html
<script>
  var main = document.getElementById('main')
  var mainTwo = document.getElementsByTagName('div')
  for (var i = 0; i < mainTwo.length; i++) {
  	console.log(mainTwo[i])
  }
  alert(main.textContent)

</script>

    <div>123</div>
    <script>
        var mainTwo = document.getElementsByTagName('div')
        console.log(mainTwo.length)
    </script>
    <div>456</div>
    <script>
        console.log(mainTwo.length)
</script>

<div id="main">
    <p>123</p>
    <p>456</p>
</div>
<script>
    var divs = document.getElementById('main')
    var ps = divs.getElementsByTagName('p')
</script>
```

注册事件, 更改属性的值，通过`img.src`， note: the class uses img.className, `this.src` == `img.src`

```html
    <img src="http://image.thomaszz4.cn/me.gif" id="img">
    <script>
        var btn = document.getElementById('img')
        btn.onclick = function() {
            alert('this is a iamge');
          	//img.src = "http://image.thomaszz4.cn/niuniu_2.JPG"
          	this.src = "http://image.thomaszz4.cn/niuniu_2.JPG"
        }
    </script>
```

`innerHTML` and `innerText`

```html
    <script>
        var change = document.getElementById('change')
        change.innerText = '<p>add a p</p>'
        change.innerHTML = '<p>add a p</p>'
    </script>
```

`onfocus` and `onblur`

```html
<script>
          text.onfocus = function() {
            this.style.backgroundColor = '#668B8B'
        }
        text.onblur = function() {
            this.style.backgroundColor = '#663B8B'
        }
</script>
```

操作自定义属性, `getAttribute`, `setAttribute` and `removeAttribute`

```html
    <p person='one' id="test">hello</p>
    <script>
        var people = document.getElementById('test')
        alert(people.getAttribute('person'))
        console.log(people.getAttribute('person'))
        people.setAttribute('sex', 'male')
        people.removeAttribute('person')
    </script>
```



## bootstrap

布局：`.container` 和 `.container-fluid` （百分百）（不要嵌套）

Table: class`table`, `table-striped` ,`table-bordered`, `table-hover`, 

**form: process the input from users**

```html
<form action = "login" method = "post">
	<p>Enter comments:</p>
	<p><input type = "text" name = "comments" /></p>
	<p><input type = "submit" value = "submit" /></p>
</form>
```

1. it has three type. `text`, `radio` and `submit` basic usage `<input type="text" name="firstname">`
2. `action` defines a function to deal with the form
3. `method` defines the type of http, `POST` or `GET`

## vue

first vue

```html
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<div id="app">
  {{ message }}
</div>
<script>
  var app = new Vue({
  el: '#app',
  data: {
    message: 'Hello Vue!'
  }
})
</script>
```

`v-text` and `v-text`

```html
<div id='app'>
  <p v-text='message'></p>
  <p v-text='content'></p>
  <p></p>
</div>
<script>
  var app = new Vue({
  el: '#app',
  data: {
    message: 'Hello Vue!',
    content: "<a href="http://www.baidu.com">baidu</a>"
  }
})
</script>
```

`v-on`

```html
    <div id="app">
        <input type="button" value="v-on指令" v-on:click="doIt">
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            methods: {
                doIt:function(){
                    alert("做IT");
                }
            }
        })
    </script>


    <div id="app">
        <input type="button" value="v-on指令" v-on:click="doIt">
        <p v-on:click="changeFood">
            {{ food }}
        </p>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                food:"西兰花"
            },
            methods: {
                doIt:function(){
                    alert("做IT");
                },
                changeFood(){
                    this.food += "好好吃";
                }
            }
        })
    </script>
```

`v-show`

```html
    <div id="app">
        <p v-show='isShow'>hello</p>
        <input type="button" value="show/hide the text" v-on:click='changeIsShow'>
    </div>
    <script>
        var app = new Vue({
            el:'#app',
            data: {
                isShow:true
            },
            methods: {
                changeIsShow(){
                    this.isShow = !this.isShow;
                }
            }
        })
    </script>
```

`v-bind`

```html
    <div id="app">
        <img v-bind:src='imgSrc'>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                imgSrc: 'https://www.itheima.com/images/logo.png'
            }
        })
    </script>

    <style>
        .active {
            border: 1px solid rebeccapurple;
        }
    </style>

    <div id="app">
        <input type="button" value="show/hide image" v-on:click="toggleActive">
        <img v-bind:src='imgSrc' :class="{active:isActive}">
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                imgSrc: 'https://www.itheima.com/images/logo.png',
                isActive:false
            },
            methods: {
                toggleActive:function(){
                    this.isActive = !this.isActive;
                }
            }
        })
    </script>
```

`v-for`

```html
    <div id="app">
        <p v-for='(item, index) in arr'>
            {{ index }} {{ item }}
        </p>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                arr: ['beijing', 'shanghai']
            }
        })
    </script>
```

`v-model`

```html
    <div id="app">
        <input type="text" v-model='message'>
        <h2>{{ message }}</h2>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                message: 'hello'
            }
        })
    </script>
```

`v-model`  application

```html
    <ul id="app">
        <input type="text" name="input" v-model='inputValue'>
        <input type="button" value="submit" v-on:click='add'>
        <li v-for='(item, index) in arr'>
            {{ item }}
            <input type="button" value="destory" v-on:click='remove(index)'>
        </li>
    </ul>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                arr: ['test_1', 'test_2'],
                inputValue: '好好学习，天天向上'
            },
            methods: {
                add:function(){
                    this.arr.push(this.inputValue);
                },
                remove:function(index){
                    this.arr.splice(index, 1);
                }
            }
        })
    </script>
```



# iTerm2

## short cut

| Command             | Usage                     |
| ------------------- | ------------------------- |
| command + t         | open new label            |
| command + w         | delete current label      |
| command + enter     | full screen model         |
| command + d         | vertially slice screen    |
| command + shift + d | horizontally slice screen |
| ^ + a               | switch to the line head   |
| ^ + e               | switch to the line end    |
| command + r         | clear screen              |
| ^ + u               | delete curren line        |
| shift + command + h | show all paste history    |

## tricks

save you paste history into disk:

`	Preferences -> General -> Magic -> Save copy/paste history to disk`

# Shell

## expect

## basic statement

### if

```shell
if [command];then
	statements
elif [command];then
	statement
else
	statement
fi
```





## Asterisk *

used to represent some text, for example:

```shell
% ls
README.md	auto_ssh	auto_update	typora
% ls *a
typora
% ls a*
auto_ssh	auto_update
```

## automatically git push

how to execute next command line only after the befor line had been finished

```shell
#!/bin/zsh
wait=`git add $1`
echo "Done git add"
out=`git commit -m 'update'`
echo "Done git commit"
result=`git push`
echo "Done git push"
```

# Markdown

## Uages

bold: `**bold**`

Italic: `*italic*`

bold and italic: `***bold and italic***`

Block quotes: `> block quotes`

Order list:

```markdown
1.
2.
3.
```

Unorderd lists:

```markdown
-
*
```

Images: `![name](path)`

Horizontal Rule: `***`

Links: `[display](links)` or `<www.baidu.com>`

Display a literal character: `/*`

Tables: `|a|b|c|`

Foodnote: `[^1]`

Strikethrough: `~~flat~~`

Task list: `- []`

color text: `$\color{#FF3030}{red}$`

<font color=#FF7F00>color text</font>  : `<font color=#FF3030></font>`

# Nginx

install nginx for ubuntu I am not sure if we could just using `sudo apt-get install nginx`, because according to the Official website, there are some pre operations, as follows:

```shell
sudo apt install curl gnupg2 ca-certificates lsb-release
curl -fsSL https://nginx.org/keys/nginx_signing.key | sudo apt-key add -
sudo apt-key fingerprint ABF5BD827BD9BF62
sudo apt update
sudo apt install nginx
```

Config: change the default port and file location

```shell
# nginx 1.18.0
vim /etc/nginx/conf.d/default.conf
########
server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;
    #access_log  /var/log/nginx/host.access.log  main;

    location / {
        root   /opt/Thomaszz4.github.io/;
        index  index.html;
    }

    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    #location ~ \.php$ {
    #    root           html;
    #    fastcgi_pass   127.0.0.1:9000;
    #    fastcgi_index  index.php;
    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
    #    include        fastcgi_params;
    #}

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
}
```

# GO

## multiple platforms compiled 

```go
// linux
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build main.go
//windows
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build main.go
```



## Usage

1. variable

   ```go
   // three types to use variables
   // 1
   func main()  {
   	var i int
     i = 20
   	fmt.Print(i)
   }
   // 2
   func main()  {
     i := 20
   	fmt.Print(i)
   }
   // 3
   func main()  {
     var i int = 20
   }
   // also you can 
   var (
   	i int = 2
   	s string = "hello"
   )
   ```

2. Variable type

   ```go
   func main()  {
     i := 20
   	fmt.Printf("%v, %T", i, i)
   }
   // 20, int
   ```

   ```go
   //global definition
   var i int = 2
   func main() {
     fmt.Print(i)
   }
   ```

   

3. Const

   ```go
   const i = 67
   //const con not change
   
   //you can use this
   package main
   
   import "fmt"
   
   const i int = 67
   
   func main() {
   	const i = 45
   	test()
   	fmt.Print(i)
   
   }
   
   func test()  {
   	fmt.Printf("%v\n", i)
   }
   
   //iota
   const(
   	a = iota
   	b = iota
   	c = iota
     //or
     //a = iota
     //b
     //c
   )
   
   func main() {
   	fmt.Printf("%v\n", a)
   	fmt.Printf("%v\n", b)
   	fmt.Printf("%v\n", c)
   }
   //0, 1, 2
   
   const(
   	a = iota
   	b = iota
   )
   
   const(
   	a2 = iota
   )
   
   func main() {
   	fmt.Printf("%v\n", a)
   	fmt.Printf("%v\n", b)
   	fmt.Printf("%v\n", a2)
   }
   //0, 1, 0 iota only works on a block of const
   ```

4. array

   ```go
   //create
   func main() {
   
   	grades := [3]int{1, 2, 3}
   	fmt.Printf("%v\n", grades)
   	
   }
   //or 
   func main() {
   
   	a := [...]int{1,2,3}
   	b := &a
   	b[2] = 2
   	fmt.Printf("%v\n %v\n", a, b)
   
   }
   // [1,2,2] [1,2,2]
   
   // or
   a := make([]int, 3)
   a[0] = 1
   fmt.Println(a)
   
   //slice
   a := []int{1,2,3,4,5,6,7,8,9,10}
   fmt.Printf("%v\n", a[:])
   fmt.Printf("%v\n", a[2:6])
   fmt.Printf("%v\n", a[:6])
   
   ```

